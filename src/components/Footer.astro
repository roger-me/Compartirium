---
import { getLangFromUrl, useTranslations, getLocalizedPath } from '../i18n/utils';

interface Props {
  lang?: 'ca' | 'es';
}

const { lang: propLang } = Astro.props;
const lang = propLang || getLangFromUrl(Astro.url);
const t = useTranslations(lang);

const currentYear = new Date().getFullYear();

const footerLinks = {
  navegacion: [
    { href: getLocalizedPath('catalogo', lang), label: t('nav.catalogo') },
    { href: getLocalizedPath('com-funciona', lang), label: t('nav.comoFunciona') },
    { href: getLocalizedPath('qui-som', lang), label: t('nav.quienesSomos') },
  ],
  cuenta: [
    { href: getLocalizedPath('client', lang), label: t('footer.miCuenta') },
    { href: getLocalizedPath('client/lloguers', lang), label: t('footer.misAlquileres') },
    { href: getLocalizedPath('client/programar', lang), label: t('footer.programar') },
  ],
  legal: [
    { href: '#', label: t('footer.privacidad') },
    { href: '#', label: t('footer.terminos') },
    { href: '#', label: t('footer.cookies') },
  ],
};
---

<footer class="mt-auto px-4 pb-4">
  <div class="container">
    <div class="footer-bg text-white rounded-[var(--radius-container)] shadow-lg p-[14px] md:p-10">
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8 lg:gap-12">
      <!-- Brand -->
      <div class="sm:col-span-2 lg:col-span-1">
        <div class="flex items-center gap-3 mb-4">
          <img src="/logo-white.svg" alt="Compartirium" class="h-10 w-10" />
          <span class="text-xl font-semibold">Compartirium</span>
        </div>
        <p class="footer-text-muted mb-4 italic">"Més que compartir"</p>
        <p class="footer-text-light text-sm">
          {t('footer.tagline')}
        </p>
      </div>

      <!-- Navigation -->
      <div>
        <h4 class="font-semibold mb-4">{t('footer.navegacion')}</h4>
        <ul class="space-y-2">
          {footerLinks.navegacion.map(link => (
            <li>
              <a href={link.href} class="footer-link">
                {link.label}
              </a>
            </li>
          ))}
        </ul>
      </div>

      <!-- Account -->
      <div>
        <h4 class="font-semibold mb-4">{t('footer.miCuenta')}</h4>
        <ul class="space-y-2">
          {footerLinks.cuenta.map(link => (
            <li>
              <a href={link.href} class="footer-link">
                {link.label}
              </a>
            </li>
          ))}
        </ul>
      </div>

      <!-- Contact -->
      <div>
        <h4 class="font-semibold mb-4">{t('footer.contacto')}</h4>
        <ul class="space-y-3 footer-text-light">
          <li class="flex items-center gap-2">
            <i class="ph ph-envelope"></i>
            <span>hola@compartirium.es</span>
          </li>
          <li class="flex items-center gap-2">
            <i class="ph ph-phone"></i>
            <span>+34 93 123 45 67</span>
          </li>
          <li class="flex items-start gap-2">
            <i class="ph ph-map-pin mt-1"></i>
            <span>Carrer de l'Educació, 42<br/>08001 Barcelona</span>
          </li>
        </ul>

        <!-- Social -->
        <div class="flex gap-4 mt-6">
          <a href="#" class="footer-link text-xl" aria-label="Instagram">
            <i class="ph ph-instagram-logo"></i>
          </a>
          <a href="#" class="footer-link text-xl" aria-label="LinkedIn">
            <i class="ph ph-linkedin-logo"></i>
          </a>
          <a href="#" class="footer-link text-xl" aria-label="Twitter">
            <i class="ph ph-twitter-logo"></i>
          </a>
        </div>
      </div>
    </div>

    <!-- Bottom -->
    <div class="border-t border-white/20 mt-10 pt-8 flex flex-col md:flex-row justify-between items-center gap-4">
      <p class="footer-text-muted text-sm">
        © {currentYear} Compartirium. {t('footer.derechos')}
      </p>
      <div class="flex flex-wrap justify-center gap-4 md:gap-6 text-sm">
        {footerLinks.legal.map(link => (
          <a href={link.href} class="footer-link-muted">
            {link.label}
          </a>
        ))}
      </div>
    </div>
    </div>
  </div>
</footer>

<style>
  .footer-bg {
    background-color: var(--color-brown-primary);
  }

  .footer-text-light {
    color: rgba(255, 255, 255, 0.85) !important;
  }

  .footer-text-muted {
    color: rgba(255, 255, 255, 0.7) !important;
  }

  .footer-link {
    color: rgba(255, 255, 255, 0.85) !important;
    transition: color 0.2s ease;
  }

  .footer-link:hover {
    color: white !important;
  }

  .footer-link-muted {
    color: rgba(255, 255, 255, 0.7) !important;
    transition: color 0.2s ease;
  }

  .footer-link-muted:hover {
    color: white !important;
  }
</style>
