---
import ClientLayout from '../../layouts/ClientLayout.astro';
import { getLocalizedPath } from '../../i18n/utils';

const lang = 'ca';

const rentals = [
  {
    id: 1,
    product: 'Set STEM Robòtica Bàsica',
    image: 'https://images.unsplash.com/photo-1535378620166-273708d44e4c?w=200',
    startDate: '15 gen 2026',
    endDate: '15 feb 2026',
    status: 'active',
    statusLabel: 'Entregat',
    price: 45,
    period: 'mes',
  },
  {
    id: 2,
    product: 'Globus Terraqüi Interactiu',
    image: 'https://images.unsplash.com/photo-1521295121783-8a321d551ad2?w=200',
    startDate: '10 gen 2026',
    endDate: '10 mar 2026',
    status: 'active',
    statusLabel: 'Entregat',
    price: 70,
    period: '2 mesos',
  },
  {
    id: 3,
    product: 'Set Matemàtiques Manipulatives',
    image: 'https://images.unsplash.com/photo-1509228468518-180dd4864904?w=200',
    startDate: '5 gen 2026',
    endDate: '5 feb 2026',
    status: 'return',
    statusLabel: 'Tornar',
    price: 30,
    period: 'mes',
  },
  {
    id: 4,
    product: 'Pack STEM Primària',
    image: 'https://images.unsplash.com/photo-1635070041078-e363dbe005cb?w=200',
    startDate: '28 gen 2026',
    endDate: '28 abr 2026',
    status: 'transit',
    statusLabel: 'En ruta',
    price: 320,
    period: 'trimestre',
  },
  {
    id: 5,
    product: 'Pack Lectura Infantil 3-5 anys',
    image: 'https://images.unsplash.com/photo-1512820790803-83ca734da794?w=200',
    startDate: '30 gen 2026',
    endDate: '30 mar 2026',
    status: 'preparing',
    statusLabel: 'Preparant',
    price: 50,
    period: '2 mesos',
  },
];

const statusStyles = {
  active: 'badge-success',
  return: 'badge-warning',
  transit: 'bg-[var(--color-success)]/10 text-[var(--color-success)]',
  preparing: 'bg-[var(--color-brown-primary)]/10 text-[var(--color-brown-primary)]',
};

const statusIcons = {
  active: 'check-circle',
  return: 'arrow-counter-clockwise',
  transit: 'truck',
  preparing: 'clock',
};
---

<ClientLayout title="Els meus lloguers" lang={lang}>
  <div class="flex items-center justify-between mb-8">
    <div>
      <h1 class="text-3xl font-semibold mb-2">Els meus lloguers</h1>
      <p class="text-[var(--color-text-secondary)]">Gestiona tots els teus lloguers actius i passats</p>
    </div>
    <a href={getLocalizedPath('catalogo', lang)} class="btn btn-primary">
      <i class="ph ph-plus"></i>
      Nova comanda
    </a>
  </div>

  <!-- Filters -->
  <div class="card p-4 mb-6">
    <div class="flex flex-wrap gap-4 items-center">
      <div class="flex items-center gap-2">
        <span class="text-sm text-[var(--color-text-muted)]">Estat:</span>
        <select class="text-sm py-2 px-3 w-auto">
          <option>Tots</option>
          <option>Actius</option>
          <option>Per tornar</option>
          <option>En preparació</option>
        </select>
      </div>
      <div class="flex items-center gap-2">
        <span class="text-sm text-[var(--color-text-muted)]">Ordenar:</span>
        <select class="text-sm py-2 px-3 w-auto">
          <option>Data devolució</option>
          <option>Data inici</option>
          <option>Nom producte</option>
        </select>
      </div>
    </div>
  </div>

  <!-- Rentals List -->
  <div class="space-y-4">
    {rentals.map(rental => (
      <div class="card p-6">
        <div class="flex flex-col sm:flex-row gap-6">
          <!-- Image -->
          <div class="w-full sm:w-32 h-32 rounded-lg overflow-hidden flex-shrink-0">
            <img src={rental.image} alt={rental.product} class="w-full h-full object-cover" />
          </div>

          <!-- Info -->
          <div class="flex-1">
            <div class="flex items-start justify-between mb-2">
              <h3 class="font-semibold text-lg">{rental.product}</h3>
              <span class={`badge ${statusStyles[rental.status]}`}>
                <i class={`ph ph-${statusIcons[rental.status]}`}></i>
                {rental.statusLabel}
              </span>
            </div>

            <div class="grid grid-cols-2 sm:grid-cols-4 gap-4 text-sm mb-4">
              <div>
                <p class="text-[var(--color-text-muted)]">Inici</p>
                <p class="font-medium">{rental.startDate}</p>
              </div>
              <div>
                <p class="text-[var(--color-text-muted)]">Devolució</p>
                <p class={`font-medium ${rental.status === 'return' ? 'text-[var(--color-warning)]' : ''}`}>
                  {rental.endDate}
                </p>
              </div>
              <div>
                <p class="text-[var(--color-text-muted)]">Període</p>
                <p class="font-medium">{rental.period}</p>
              </div>
              <div>
                <p class="text-[var(--color-text-muted)]">Preu</p>
                <p class="font-medium text-[var(--color-brown-primary)]">{rental.price}€</p>
              </div>
            </div>

            <!-- Actions -->
            <div class="flex flex-wrap gap-2">
              {rental.status === 'active' && (
                <>
                  <button class="btn btn-secondary text-sm py-2">
                    <i class="ph ph-arrows-clockwise"></i>
                    Renovar
                  </button>
                  <button class="btn btn-secondary text-sm py-2">
                    <i class="ph ph-calendar-plus"></i>
                    Ampliar
                  </button>
                </>
              )}
              {rental.status === 'return' && (
                <button class="btn btn-primary text-sm py-2">
                  <i class="ph ph-truck"></i>
                  Programar recollida
                </button>
              )}
              <button class="btn btn-secondary text-sm py-2">
                <i class="ph ph-warning-circle"></i>
                Incidència
              </button>
              <button class="btn btn-secondary text-sm py-2">
                <i class="ph ph-eye"></i>
                Veure detall
              </button>
            </div>
          </div>
        </div>
      </div>
    ))}
  </div>

  <!-- Pagination -->
  <div class="flex items-center justify-between mt-8">
    <p class="text-sm text-[var(--color-text-muted)]">Mostrant 5 de 5 lloguers</p>
    <div class="flex gap-2">
      <button class="btn btn-secondary py-2 px-4 text-sm" disabled>
        <i class="ph ph-caret-left"></i>
      </button>
      <button class="btn btn-primary py-2 px-4 text-sm">1</button>
      <button class="btn btn-secondary py-2 px-4 text-sm" disabled>
        <i class="ph ph-caret-right"></i>
      </button>
    </div>
  </div>
</ClientLayout>
